/* src/branding/brand.css
   ─────────────────────────────────────────────────────────────
   KCE Design Tokens (CSS Custom Properties) — armonizado
   con Tailwind y globals.css
   ───────────────────────────────────────────────────────────── */

:root,
[data-theme="light"] {
  /* ===== Brand palette ===== */
  --brand-yellow: #FFC300;
  --brand-blue:   #0D5BA1;
  --brand-red:    #D32F2F;
  --brand-terra:  #C68436;
  --brand-beige:  #FFF5E1;
  --brand-dark:   #111827;
  --brand-white:  #FFFFFF;

  /* ===== Semantic colors (Light) ===== */
  --color-bg:            var(--brand-beige);
  --color-surface:       var(--brand-white);
  --color-surface-2:     #F8FAFC;
  --color-text:          var(--brand-dark);
  --color-text-muted:    #475569; /* slate-600 */
  --color-border:        rgba(17, 24, 39, 0.08); /* brand-dark/8% */

  /* Focus ring (con color-mix + fallback abajo) */
  --ring-inner:          color-mix(in oklab, var(--brand-blue), #ffffff 60%);
  --ring-outer:          color-mix(in oklab, var(--brand-blue), #000000 12%);
  --focus-ring:          0 0 0 2px var(--ring-inner), 0 0 0 4px var(--ring-outer);

  --color-success: #16A34A; /* green-600 */
  --color-warning: #D97706; /* amber-600 */
  --color-error:   #DC2626; /* red-600 */

  /* ===== Radii & shadows ===== */
  --radius-xs:   0.375rem;
  --radius-sm:   0.5rem;
  --radius:      1.25rem;   /* 20px */
  --radius-lg:   1.5rem;
  --radius-2xl:  2rem;
  --radius-full: 999px;

  --shadow-soft: 0 6px 24px rgba(2, 6, 23, 0.08);
  --shadow-pop:  0 10px 30px rgba(2, 6, 23, 0.12);
  --shadow-hard: 0 12px 48px rgba(2, 6, 23, 0.18);

  /* ===== Layout tokens ===== */
  --container-max: 1280px;
  --header-h: 64px;
  --backdrop-blur: 12px;

  /* ===== Motion ===== */
  --ease-out: cubic-bezier(.16, 1, .3, 1);
  --ease-in:  cubic-bezier(.4, 0, 1, 1);
  --dur-1: 120ms;
  --dur-2: 220ms;
  --dur-3: 360ms;

  /* ===== Z-index ===== */
  --z-header: 40;
  --z-chat:   50;
  --z-modal:  60;

  /* ===== Gradients & overlays ===== */
  --gradient-hero:        linear-gradient(to top, rgba(0,0,0,.7), rgba(0,0,0,.2));
  --gradient-fade-bottom: linear-gradient(to top, var(--color-bg), transparent);

  --overlay-strong: rgba(0,0,0,.6);
  --overlay-soft:   rgba(0,0,0,.2);

  /* ===== Spacing helpers (opcionales) ===== */
  --space-x: 1.5rem;
  --space-y: 0.75rem;

  /* Sugerencia para formularios/navegador */
  color-scheme: light dark;
}

/* Modo oscuro automático si el usuario lo prefiere (sin data-theme explícito) */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --color-bg:         #0B1220;
    --color-surface:    #0E1626;
    --color-surface-2:  #0B1422;
    --color-text:       #E6ECF5;
    --color-text-muted: #98A6B8;
    --color-border:     rgba(255, 255, 255, 0.08);
    --ring-inner:       color-mix(in oklab, var(--brand-blue), #ffffff 20%);
    --ring-outer:       color-mix(in oklab, var(--brand-blue), #ffffff 12%);
    --focus-ring:       0 0 0 2px var(--ring-inner), 0 0 0 4px var(--ring-outer);
    --shadow-soft:      0 8px 28px rgba(0,0,0,.42);
    --shadow-pop:       0 12px 40px rgba(0,0,0,.5);
    --shadow-hard:      0 16px 56px rgba(0,0,0,.6);
    --gradient-hero:    linear-gradient(to top, rgba(0,0,0,.65), rgba(0,0,0,.25));
    color-scheme: dark;
  }
}

/* Modo oscuro forzado por atributo o clase (alineado con Tailwind .dark) */
[data-theme="dark"],
.dark {
  --color-bg:         #0B1220;
  --color-surface:    #0E1626;
  --color-surface-2:  #0B1422;
  --color-text:       #E6ECF5;
  --color-text-muted: #98A6B8;
  --color-border:     rgba(255, 255, 255, 0.08);
  --ring-inner:       color-mix(in oklab, var(--brand-blue), #ffffff 20%);
  --ring-outer:       color-mix(in oklab, var(--brand-blue), #ffffff 12%);
  --focus-ring:       0 0 0 2px var(--ring-inner), 0 0 0 4px var(--ring-outer);
  --shadow-soft:      0 8px 28px rgba(0,0,0,.42);
  --shadow-pop:       0 12px 40px rgba(0,0,0,.5);
  --shadow-hard:      0 16px 56px rgba(0,0,0,.6);
  --gradient-hero:    linear-gradient(to top, rgba(0,0,0,.65), rgba(0,0,0,.25));
  color-scheme: dark;
}

/* Respeto a usuarios con reduce-motion */
@media (prefers-reduced-motion: reduce) {
  :root {
    --dur-1: 0ms;
    --dur-2: 0ms;
    --dur-3: 0ms;
  }
}

/* ===== Low-level utilities ===== */

.brand-focus {
  outline: none !important;
  box-shadow: var(--focus-ring) !important;
}

/* Tarjetas */
.brand-card,
.card {
  background: var(--color-surface);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
  border: 1px solid var(--color-border);
}

/* Sombras reutilizables (se usan en varios layouts) */
.shadow-soft { box-shadow: var(--shadow-soft); }
.shadow-pop  { box-shadow: var(--shadow-pop); }
.shadow-hard { box-shadow: var(--shadow-hard); }

/* Botones base + variantes.
   Alias a .btn para sincronía con componentes existentes */
.brand-btn,
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  border-radius: var(--radius);
  padding: 0.75rem 1.25rem;
  font-family: var(--font-heading, inherit);
  line-height: 1.1;
  transition: transform var(--dur-1) var(--ease-out), box-shadow var(--dur-1) var(--ease-out), opacity var(--dur-1) var(--ease-out);
  box-shadow: var(--shadow-soft);
  will-change: transform, box-shadow;
}
.brand-btn:hover,
.btn:hover { transform: translateY(-1px); }
.brand-btn:focus-visible,
.btn:focus-visible { box-shadow: var(--focus-ring), var(--shadow-soft); }
.btn:disabled { opacity: .6; cursor: not-allowed; }

/* Variantes */
.brand-btn--primary,
.btn-primary,
.btn.bg-brand-blue {
  background: var(--brand-blue);
  color: var(--brand-white);
}

.brand-btn--accent,
.btn-accent {
  background: var(--brand-yellow);
  color: var(--brand-dark);
}

.btn-outline {
  background: transparent;
  color: var(--color-text);
  border: 1px solid var(--color-border);
}
.btn-outline:hover { background: rgba(0,0,0,.03); }

/* Shimmer para skeletons (usado en loading/landing/cards) */
.skeleton {
  position: relative;
  overflow: hidden;
  background: var(--color-surface-2);
}
.skeleton::after {
  content: '';
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(255,255,255,.35) 50%,
    transparent 100%
  );
  animation: kce-shimmer 1.4s var(--ease-out) infinite;
}
@keyframes kce-shimmer {
  100% { transform: translateX(100%); }
}

/* Fallback simple de focus ring (por si color-mix no existe) */
@supports not (color: color-mix(in oklab, white, black)) {
  :root {
    --focus-ring: 0 0 0 2px rgba(13, 91, 161, 0.28), 0 0 0 4px rgba(13, 91, 161, 0.12);
  }
}

/* Pequeños “quality of life” */
:is(button, [role="button"], .btn) { cursor: pointer; }
img, svg { shape-rendering: geometricPrecision; }
